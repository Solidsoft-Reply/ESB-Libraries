<?xml version="1.0" encoding="utf-8"?>
<brl xmlns="http://schemas.microsoft.com/businessruleslanguage/2002">
  <ruleset name="Esb Demo">
    <version major="1" minor="2" description="" modifiedby="WIN-8L35R8E7JJS\Administrator" date="2014-05-24T12:50:30.4671593+01:00" />
    <version major="1" minor="0" description="" modifiedby="WIN-8L35R8E7JJS\Administrator" date="2014-05-24T19:55:27.2370626+01:00" />
    <configuration />
    <bindings>
      <class ref="Interchange" class="Interchange" instance="0" instances="16" selectivity="1">
        <assembly>Solidsoft.Esb.Facts, Version=1.0.0.0, Culture=neutral, PublicKeyToken=cb2a1e0509631d62</assembly>
        <!--C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Solidsoft.Esb.Facts\v4.0_1.0.0.0__cb2a1e0509631d62\Solidsoft.Esb.Facts.dll-->
        <namespace>Solidsoft.Esb.Facts</namespace>
      </class>
    </bindings>
    <rule name="BAM - Purchase Order Processing - PO Received" priority="0" active="true">
      <if>
        <compare operator="equal">
          <vocabularylink uri="3f0e9bcc-6212-4e6a-853c-e517f157a626" element="05703dd9-1111-40b8-890d-ad7bfc45a925" />
          <lhs>
            <function>
              <vocabularylink uri="9f19c1be-f329-41bb-8526-97de6fb3beb4" element="6c5f990b-8005-4369-998d-744dd82e416d" />
              <classmember member="get_MessageType" sideeffects="true">
                <classref ref="Interchange" />
              </classmember>
            </function>
          </lhs>
          <rhs>
            <constant>
              <string>http://solidsoftreply.com/purchaseorder/2014/01#purchaseOrder</string>
            </constant>
          </rhs>
        </compare>
      </if>
      <then>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="52f07b7a-0af7-4b5d-bbea-241ded626ff4" />
          <classmember member="SetBamInterception" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>bam</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>Purchase Order Processing</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>PO Received</string>
              </constant>
            </argument>
          </classmember>
        </function>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="6b61f174-02b6-491c-b52c-ac3abdfa8f25" />
          <classmember member="SetBamConfiguration" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>bam</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>Data Source=.;Initial Catalog=BAMPrimaryImport;Integrated Security=True</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <boolean>false</boolean>
              </constant>
            </argument>
            <argument>
              <constant>
                <int>1</int>
              </constant>
            </argument>
          </classmember>
        </function>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="a1b0ebc0-c493-4a45-80fb-4e989964b282" />
          <classmember member="SetBamTrackpointPolicy" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>bam</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>Esb Demo BAM</string>
              </constant>
            </argument>
          </classmember>
        </function>
      </then>
    </rule>
    <rule name="Route to PO Submission service" priority="0" active="true">
      <if>
        <compare operator="equal">
          <vocabularylink uri="3f0e9bcc-6212-4e6a-853c-e517f157a626" element="05703dd9-1111-40b8-890d-ad7bfc45a925" />
          <lhs>
            <function>
              <vocabularylink uri="9f19c1be-f329-41bb-8526-97de6fb3beb4" element="6c5f990b-8005-4369-998d-744dd82e416d" />
              <classmember member="get_MessageType" sideeffects="true">
                <classref ref="Interchange" />
              </classmember>
            </function>
          </lhs>
          <rhs>
            <constant>
              <string>http://solidsoftreply.com/purchaseorderservice/2014/02#SubmitPurchaseOrder</string>
            </constant>
          </rhs>
        </compare>
      </if>
      <then>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="bb1b9694-64a3-46e3-bc17-e0688ffb4708" />
          <classmember member="SetEndpoint" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>route</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>http://localhost/PurchaseOrders/PurchaseOrderProcessing.svc</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>WCF-BasicHttp</string>
              </constant>
            </argument>
          </classmember>
        </function>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="d72c2145-66e8-4bc9-80d7-1d55b0d32cf1" />
          <classmember member="SetSoapAction" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>route</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>http://solidsoftreply.com/purchaseorderservice/2014/02/IPurchaseOrderProcessing/SubmitPurchaseOrder</string>
              </constant>
            </argument>
          </classmember>
        </function>
      </then>
    </rule>
    <rule name="Transform inbound PO from customer B" priority="0" active="true">
      <if>
        <compare operator="equal">
          <vocabularylink uri="3f0e9bcc-6212-4e6a-853c-e517f157a626" element="05703dd9-1111-40b8-890d-ad7bfc45a925" />
          <lhs>
            <function>
              <vocabularylink uri="9f19c1be-f329-41bb-8526-97de6fb3beb4" element="6c5f990b-8005-4369-998d-744dd82e416d" />
              <classmember member="get_MessageType" sideeffects="true">
                <classref ref="Interchange" />
              </classmember>
            </function>
          </lhs>
          <rhs>
            <constant>
              <string>NAMM_PO</string>
            </constant>
          </rhs>
        </compare>
      </if>
      <then>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="7b42cfe1-cd41-4f0a-9e3f-53c7ff76048a" />
          <classmember member="SetTransformation" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>transform</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>DemoEsb.Maps.CanonicalPOFromPOCustomerB, DemoEsb, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f23341e0e17febab</string>
              </constant>
            </argument>
          </classmember>
        </function>
      </then>
    </rule>
    <rule name="BAM - Purchase Order Processing: PO Submission Response Received" priority="0" active="false">
      <if>
        <compare operator="equal">
          <vocabularylink uri="3f0e9bcc-6212-4e6a-853c-e517f157a626" element="05703dd9-1111-40b8-890d-ad7bfc45a925" />
          <lhs>
            <function>
              <vocabularylink uri="9f19c1be-f329-41bb-8526-97de6fb3beb4" element="6c5f990b-8005-4369-998d-744dd82e416d" />
              <classmember member="get_MessageType" sideeffects="true">
                <classref ref="Interchange" />
              </classmember>
            </function>
          </lhs>
          <rhs>
            <constant>
              <string>http://solidsoftreply.com/purchaseorderservice/2014/02#SubmitPurchaseOrderResponse</string>
            </constant>
          </rhs>
        </compare>
      </if>
      <then>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="52f07b7a-0af7-4b5d-bbea-241ded626ff4" />
          <classmember member="SetBamInterception" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>bam</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>Purchase Order Processing</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>PO Submission Response Received</string>
              </constant>
            </argument>
          </classmember>
        </function>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="6b61f174-02b6-491c-b52c-ac3abdfa8f25" />
          <classmember member="SetBamConfiguration" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>bam</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>Data Source=.;Initial Catalog=BAMPrimaryImport;Integrated Security=True</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <boolean>false</boolean>
              </constant>
            </argument>
            <argument>
              <constant>
                <int>1</int>
              </constant>
            </argument>
          </classmember>
        </function>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="a1b0ebc0-c493-4a45-80fb-4e989964b282" />
          <classmember member="SetBamTrackpointPolicy" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>bam</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>Esb Demo BAM</string>
              </constant>
            </argument>
          </classmember>
        </function>
      </then>
    </rule>
    <rule name="Transform inbound PO from customer A" priority="0" active="true">
      <if>
        <compare operator="equal">
          <vocabularylink uri="3f0e9bcc-6212-4e6a-853c-e517f157a626" element="05703dd9-1111-40b8-890d-ad7bfc45a925" />
          <lhs>
            <function>
              <vocabularylink uri="9f19c1be-f329-41bb-8526-97de6fb3beb4" element="6c5f990b-8005-4369-998d-744dd82e416d" />
              <classmember member="get_MessageType" sideeffects="true">
                <classref ref="Interchange" />
              </classmember>
            </function>
          </lhs>
          <rhs>
            <constant>
              <string>http://customer.com/po#PurchaseOrder</string>
            </constant>
          </rhs>
        </compare>
      </if>
      <then>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="7b42cfe1-cd41-4f0a-9e3f-53c7ff76048a" />
          <classmember member="SetTransformation" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>transform</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>DemoEsb.Maps.CanonicalPOFromPOCustomerA, DemoEsb, Version=1.0.0.0, Culture=neutral, PublicKeyToken=f23341e0e17febab</string>
              </constant>
            </argument>
          </classmember>
        </function>
      </then>
    </rule>
    <rule name="BAM - Purchase Order Processing: PO Submitted" priority="0" active="true">
      <if>
        <compare operator="equal">
          <vocabularylink uri="3f0e9bcc-6212-4e6a-853c-e517f157a626" element="05703dd9-1111-40b8-890d-ad7bfc45a925" />
          <lhs>
            <function>
              <vocabularylink uri="9f19c1be-f329-41bb-8526-97de6fb3beb4" element="6c5f990b-8005-4369-998d-744dd82e416d" />
              <classmember member="get_MessageType" sideeffects="true">
                <classref ref="Interchange" />
              </classmember>
            </function>
          </lhs>
          <rhs>
            <constant>
              <string>http://solidsoftreply.com/purchaseorderservice/2014/02#SubmitPurchaseOrder</string>
            </constant>
          </rhs>
        </compare>
      </if>
      <then>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="52f07b7a-0af7-4b5d-bbea-241ded626ff4" />
          <classmember member="SetBamInterception" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>bam</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>Purchase Order Processing</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>PO Submitted</string>
              </constant>
            </argument>
          </classmember>
        </function>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="6b61f174-02b6-491c-b52c-ac3abdfa8f25" />
          <classmember member="SetBamConfiguration" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>bam</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>Data Source=.;Initial Catalog=BAMPrimaryImport;Integrated Security=True</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <boolean>false</boolean>
              </constant>
            </argument>
            <argument>
              <constant>
                <int>1</int>
              </constant>
            </argument>
          </classmember>
        </function>
        <function>
          <vocabularylink uri="5307b377-4da8-4aa5-94f4-4b22fe859fad" element="a1b0ebc0-c493-4a45-80fb-4e989964b282" />
          <classmember member="SetBamTrackpointPolicy" sideeffects="true">
            <classref ref="Interchange" />
            <argument>
              <constant>
                <string>bam</string>
              </constant>
            </argument>
            <argument>
              <constant>
                <string>Esb Demo BAM</string>
              </constant>
            </argument>
          </classmember>
        </function>
      </then>
    </rule>
  </ruleset>
</brl>